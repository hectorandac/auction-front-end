{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from 'react';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\n\nvar Api = /*#__PURE__*/function () {\n  function Api() {\n    _classCallCheck(this, Api);\n\n    Api.axiosInstance = this.loadAxios();\n    Api.cookies = new Cookies();\n  }\n\n  _createClass(Api, [{\n    key: \"loadAxios\",\n    value: function loadAxios() {\n      var axiosInstance = axios.create();\n      axiosInstance.interceptors.request.use(function (config) {\n        config.headers = {\n          'access-token': Api.cookies.get('token') == undefined ? '' : Api.cookies.get('token'),\n          'client': Api.cookies.get('client') == undefined ? '' : Api.cookies.get('client'),\n          'uid': Api.cookies.get('uid') == undefined ? '' : Api.cookies.get('uid')\n        };\n        return config;\n      }, function (error) {\n        return Promise.reject(error);\n      });\n      return axiosInstance;\n    }\n  }], [{\n    key: \"signIn\",\n    value: function signIn(email, password, onSuccess, onFailure, onStart, onFinish) {\n      onStart();\n      var data = {\n        email: email,\n        password: password\n      };\n      Api.axiosInstance.post(\"\".concat(process.env.NEXT_PUBLIC_API_URL, \"/auth/sign_in\"), data).then(function (response) {\n        onSuccess(response);\n        Api.cookies.set('access-token', response.headers['access-token'], {\n          path: '/'\n        });\n        Api.cookies.set('client', response.headers['client'], {\n          path: '/'\n        });\n        Api.cookies.set('uid', response.headers['uid'], {\n          path: '/'\n        });\n        Api.cookies.set('role', response.data.data.roles_list[0], {\n          path: '/'\n        });\n      })[\"catch\"](function (error) {\n        console.log(error);\n        onFailure(error.response.data.errors);\n      });\n      onFinish();\n    }\n  }, {\n    key: \"userLoggedIn\",\n    value: function userLoggedIn() {\n      return Api.cookies.get('access-token') != undefined && Api.cookies.get('client') != undefined && Api.cookies.get('uid') != undefined && Api.cookies.get('role') != undefined;\n    }\n  }]);\n\n  return Api;\n}();\n\n_defineProperty(Api, \"axiosInstance\", void 0);\n\nexport { Api as default };","map":{"version":3,"sources":["/Users/hectorandac/Documents/Projects/auctions/auctions-front-end/pages/components/api.js"],"names":["React","axios","Cookies","Api","axiosInstance","loadAxios","cookies","create","interceptors","request","use","config","headers","get","undefined","error","Promise","reject","email","password","onSuccess","onFailure","onStart","onFinish","data","post","process","env","NEXT_PUBLIC_API_URL","then","response","set","path","roles_list","console","log","errors"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\n\nexport default class Api {\n\n  static axiosInstance;\n\n  constructor() {\n    Api.axiosInstance = this.loadAxios();\n    Api.cookies = new Cookies();\n  }\n\n  static signIn(email, password, onSuccess, onFailure, onStart, onFinish) {\n    onStart();\n    var data = {\n      email: email,\n      password: password\n    }\n    Api.axiosInstance.post(`${process.env.NEXT_PUBLIC_API_URL}/auth/sign_in`, data).then(function (response) {\n      onSuccess(response);\n      Api.cookies.set('access-token', response.headers['access-token'], { path: '/' });\n      Api.cookies.set('client', response.headers['client'], { path: '/' });\n      Api.cookies.set('uid', response.headers['uid'], { path: '/' });\n      Api.cookies.set('role', response.data.data.roles_list[0], { path: '/' });\n    }).catch(function (error) {\n      console.log(error)\n      onFailure(error.response.data.errors);\n    });\n    onFinish();\n  }\n\n  static userLoggedIn() {\n    return Api.cookies.get('access-token') != undefined && Api.cookies.get('client') != undefined && Api.cookies.get('uid') != undefined && Api.cookies.get('role') != undefined\n  }\n\n  loadAxios() {\n    const axiosInstance = axios.create();\n  \n    axiosInstance.interceptors.request.use(\n      config => {\n        config.headers = {\n          'access-token': Api.cookies.get('token') == undefined ? '' : Api.cookies.get('token'),\n          'client': Api.cookies.get('client') == undefined ? '' : Api.cookies.get('client'),\n          'uid': Api.cookies.get('uid') == undefined ? '' : Api.cookies.get('uid')\n        };\n  \n        return config;\n      },\n      error => Promise.reject(error)\n    );\n  \n    return axiosInstance;\n  }\n}"]},"metadata":{},"sourceType":"module"}