{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/hectorandac/Documents/Projects/auctions/auctions-front-end/pages/components/searchBar.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  padding: 16px;\\n  cursor: pointer;\\n  transition: 0.5s;\\n  background-color: \", \";\\n  :nth-child(n+1):nth-last-child(-n+1),\\n  :nth-child(n+1):nth-last-child(-n+1) ~ li {\\n    border:none;\\n  }\\n  :hover {\\n    background-color: #ECF5FE;\\n  }\\n  :before {\\n    font-size: 12px;\\n    content: '\", \"';\\n    margin-right: 8px;\\n    background-color: #A9A9A9;\\n    color: white;\\n    padding: 4px;\\n    border-radius: 4px;\\n  }\\n  :after {\\n    opacity: \", \";\\n    color: white;\\n    transition: 0.5s;\\n    background: lightgrey;\\n    direction: ltr;\\n    display: inline-block;\\n    font-family: 'Material Icons', Verdana, Geneva, Tahoma, sans-serif;\\n    font-size: 12px;\\n    border-radius: 4px;\\n    padding: 2px;\\n    font-style: normal;\\n    font-weight: normal;\\n    letter-spacing: normal;\\n    line-height: 1;\\n    text-transform: none;\\n    white-space: nowrap;\\n    word-wrap: normal;\\n    -webkit-font-feature-settings: 'liga';\\n    -webkit-font-smoothing: antialiased;\\n    content: \\\"keyboard_return\\\";\\n    position: absolute;\\n    right: 8px;\\n    top: 0;\\n    bottom: 0;\\n    margin: auto 0;\\n    height: 12px;\\n  }\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-top: 4px;\\n  background-color: white;\\n  border-radius: 4px;\\n  height: auto;\\n  overflow: scroll;\\n  width: 100%;\\n  height: \", \";\\n  max-height: 360px;\\n  z-index: 10;\\n  box-shadow: 0 3px 5px 2px rgba(0, 0, 0, \", \");\\n  list-style-type: none;\\n  padding-inline-start: 0;\\n  margin-bottom: -1px;\\n  transition: 0.3s ease-out;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 51px;\\n  right: 0;\\n  left: 0;\\n  width: 75%;\\n  max-width: 450px;\\n  margin: auto;\\n  display: flex;\\n  flex-direction: column;\\n  overflow: visible;\\n  @media (max-width: 600px) {\\n        width: 95%;\\n    }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 14px;\\n  height: 14px;\\n  border-radius: 7px;\\n  right: 56px;\\n  top: 17px;\\n  line-height: 14px;\\n  background-color: lightgray;\\n  color: gray;\\n  position: absolute;\\n  text-align: center;\\n  vertical-align: middle;\\n  margin: auto;\\n  cursor: pointer;\\n  display: \", \";\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: calc(100% - 48px);\\n  background-color: #ffffff;\\n  outline: none;\\n  border: none;\\n  height: 100%;\\n  font-family: raleway, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\\n  padding-left: 8px;\\n  font-size: 16px;\\n  font-weight: 100;\\n  box-shadow: 0 3px 5px 2px rgba(0, 0, 0, .1);\\n  border-radius: 4px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 48px;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 44px;\\n    height: 48px;\\n    background-color: white;\\n    margin-left: 4px;\\n    border-radius: 4px;\\n    box-shadow: 0 3px 5px 2px rgba(0, 0, 0, .1);\\n    display: flex;\\n    justify-content: center;\\n    justify-items: center;\\n    align-content: center;\\n    align-items: center;\\n    transition: 0.5s;\\n    :hover {\\n    box-shadow: 0 3px 5px 2px rgba(0, 0, 0, .2)\\n    }\\n    :active {\\n    box-shadow: 0 3px 5px 2px rgba(0, 0, 0, 0);\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport styled from 'styled-components';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { useState, createRef, useEffect } from 'react';\nimport { IconButton, makeStyles } from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nvar useStyles = makeStyles({\n  filterButton: {\n    backgroundColor: '#094074'\n  }\n});\nvar SearchButton = styled.div(_templateObject());\n_c = SearchButton;\nvar SearchBarContainer = styled.div(_templateObject2());\n_c2 = SearchBarContainer;\nvar SearchInput = styled.input(_templateObject3());\n_c3 = SearchInput;\nvar RemoveText = styled.div(_templateObject4(), function (props) {\n  return props.haveText ? 'show' : 'none';\n});\n_c4 = RemoveText;\nvar SearchSection = styled.div(_templateObject5());\n_c5 = SearchSection;\nvar SearchResults = styled.ul(_templateObject6(), function (props) {\n  return props.height !== undefined ? props.height + 'px' : 0;\n}, function (props) {\n  return props.hide ? 0 : 0.1;\n});\n_c6 = SearchResults;\nvar SearchResult = styled.li(_templateObject7(), function (props) {\n  return props.focused ? '#ECF5FE' : 'white';\n}, function (props) {\n  return props.category;\n}, function (props) {\n  return props.focused ? '1' : '0';\n});\n_c7 = SearchResult;\n\nvar scrollToRef = function scrollToRef(searchResults, singleResult, fisrtSingleResult) {\n  var searchResultCoordinates = searchResults.getBoundingClientRect();\n  var singleResultCoordinates = singleResult.getBoundingClientRect();\n  var fisrtSingleResultCoordinates = fisrtSingleResult.getBoundingClientRect();\n  var yStartSearchResultCoordinates = searchResultCoordinates.top;\n  var yEndSearchResultCoordinates = yStartSearchResultCoordinates + searchResults.offsetHeight;\n  var outsideTopLimit = singleResultCoordinates.top < yStartSearchResultCoordinates;\n  var outsideBottomLimit = singleResultCoordinates.y + singleResult.offsetHeight > yEndSearchResultCoordinates; // Get if element is inside view\n\n  if (outsideTopLimit || outsideBottomLimit) {\n    var currentY = yStartSearchResultCoordinates - fisrtSingleResultCoordinates.top;\n    var visibleForEndPointDelta = singleResultCoordinates.top - yEndSearchResultCoordinates;\n    var visibleForStartPointDelta = yStartSearchResultCoordinates - singleResultCoordinates.top;\n\n    if (visibleForEndPointDelta < 0) {\n      var moveToDesiredPoint = currentY - visibleForStartPointDelta;\n      searchResults.scrollTo(0, moveToDesiredPoint);\n    } else {\n      var _moveToDesiredPoint = currentY + visibleForEndPointDelta + singleResult.offsetHeight;\n\n      searchResults.scrollTo(0, _moveToDesiredPoint);\n    }\n  }\n};\n\nvar searchField = /*#__PURE__*/createRef();\nvar searchResultsRef = /*#__PURE__*/createRef();\nexport default function SearchBar(props) {\n  _s();\n\n  var _this = this;\n\n  var customStyles = useStyles();\n\n  var _useState = useState(\"\"),\n      search = _useState[0],\n      setSearch = _useState[1];\n\n  var _useState2 = useState([]),\n      results = _useState2[0],\n      setResults = _useState2[1];\n\n  var _useState3 = useState(0),\n      currentNode = _useState3[0],\n      setCurrentNode = _useState3[1];\n\n  var refs = [];\n  useKeyPress('ArrowDown', function () {\n    return handleDownKey(currentNode, setCurrentNode, results, refs, searchResultsRef.current);\n  });\n  useKeyPress('ArrowUp', function () {\n    return handleUpKey(currentNode, setCurrentNode, results, refs, searchResultsRef.current);\n  });\n  return __jsx(SearchSection, _extends({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }), __jsx(SearchBarContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, filterButton(customStyles), props.allowFilter ? function () {\n    return filterButton();\n  } : __jsx(React.Fragment, null), __jsx(SearchInput, {\n    onKeyDown: function onKeyDown(e) {\n      ignoreKeyPressed(e, 'ArrowUp');\n      ignoreKeyPressed(e, 'ArrowDown');\n    },\n    onKeyUp: function onKeyUp(e) {\n      ignoreKeyPressed(e, 'ArrowUp');\n      ignoreKeyPressed(e, 'ArrowDown');\n    },\n    ref: searchField,\n    value: search,\n    onChange: function onChange(t) {\n      return handleOnChnage(t.target.value, setSearch, setResults);\n    },\n    placeholder: \"Search for anything\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }), __jsx(SearchButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, __jsx(SearchIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  })), __jsx(RemoveText, {\n    align: \"center\",\n    haveText: search.length > 0,\n    onClick: function onClick() {\n      return handleOnChnage('', setSearch, setResults);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  }, \"\\xD7\")), __jsx(SearchResults, {\n    ref: searchResultsRef,\n    hide: results.length == 0,\n    height: results.length * 52,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, results.map(function (r, index) {\n    return __jsx(SearchResult, {\n      ref: function ref(node) {\n        return refs = [].concat(_toConsumableArray(refs), [node]);\n      },\n      focused: index === currentNode,\n      category: 'category',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 22\n      }\n    }, r);\n  })));\n}\n\n_s(SearchBar, \"PEHWpWX8q7RBfMqTu/RiMoYDIMg=\", false, function () {\n  return [useStyles, useKeyPress, useKeyPress];\n});\n\n_c8 = SearchBar;\n\nfunction filterButton(customStyles) {\n  return __jsx(IconButton, {\n    classes: {\n      root: customStyles.filterButton\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 10\n    }\n  }, __jsx(FilterListIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 5\n    }\n  }));\n}\n\nfunction ignoreKeyPressed(e, key) {\n  if (e.key === key) {\n    e.preventDefault();\n  }\n}\n\nfunction handleUpKey(currentNode, setCurrentNode, results, refs, parent) {\n  var tempNode = currentNode - 1;\n\n  if (tempNode > -1) {\n    setCurrentNode(tempNode);\n    scrollToRef(parent, refs[tempNode], refs[0]);\n  }\n}\n\nfunction handleDownKey(currentNode, setCurrentNode, results, refs, parent) {\n  var tempNode = currentNode + 1;\n\n  if (tempNode < results.length) {\n    setCurrentNode(tempNode);\n    scrollToRef(parent, refs[tempNode], refs[0]);\n  }\n}\n\nfunction handleOnChnage(value, searchSetter, resultSetter) {\n  searchSetter(value);\n\n  if (value.length == 0) {\n    resultSetter([]);\n  } else {\n    resultSetter(fetchResults(value));\n  }\n\n  if (searchField.current != null) {\n    searchField.current.focus();\n  }\n}\n\nfunction fetchResults(value) {\n  return [\"Test result 1\", \"Test result 2\", \"Test result 3\", \"Test result 4\", \"Test result 5\", \"Test result 6\", \"Test result 7\", \"Test result 8\"];\n}\n\nexport function useKeyPress(targetKey) {\n  _s2();\n\n  var onPressDown = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  var onPressUp = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n  // State for keeping track of whether key is pressed\n  var _useState4 = useState(false),\n      keyPressed = _useState4[0],\n      setKeyPressed = _useState4[1];\n\n  useEffect(function () {\n    // If pressed key is our target key then set to true\n    function downHandler(_ref) {\n      var key = _ref.key;\n\n      if (key === targetKey) {\n        setKeyPressed(true);\n        onPressDown();\n      }\n    } // If released key is our target key then set to false\n\n\n    var upHandler = function upHandler(_ref2) {\n      var key = _ref2.key;\n\n      if (key === targetKey) {\n        setKeyPressed(false);\n        onPressUp();\n      }\n    }; // Add event listeners\n\n\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler); // Remove event listeners on cleanup\n\n    return function () {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  });\n  return keyPressed;\n}\n\n_s2(useKeyPress, \"vmDSD7h68k9Z7B48/eX82jyokKU=\");\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"SearchButton\");\n$RefreshReg$(_c2, \"SearchBarContainer\");\n$RefreshReg$(_c3, \"SearchInput\");\n$RefreshReg$(_c4, \"RemoveText\");\n$RefreshReg$(_c5, \"SearchSection\");\n$RefreshReg$(_c6, \"SearchResults\");\n$RefreshReg$(_c7, \"SearchResult\");\n$RefreshReg$(_c8, \"SearchBar\");","map":{"version":3,"sources":["/Users/hectorandac/Documents/Projects/auctions/auctions-front-end/pages/components/searchBar.js"],"names":["styled","SearchIcon","useState","createRef","useEffect","IconButton","makeStyles","FilterListIcon","useStyles","filterButton","backgroundColor","SearchButton","div","SearchBarContainer","SearchInput","input","RemoveText","props","haveText","SearchSection","SearchResults","ul","height","undefined","hide","SearchResult","li","focused","category","scrollToRef","searchResults","singleResult","fisrtSingleResult","searchResultCoordinates","getBoundingClientRect","singleResultCoordinates","fisrtSingleResultCoordinates","yStartSearchResultCoordinates","top","yEndSearchResultCoordinates","offsetHeight","outsideTopLimit","outsideBottomLimit","y","currentY","visibleForEndPointDelta","visibleForStartPointDelta","moveToDesiredPoint","scrollTo","searchField","searchResultsRef","SearchBar","customStyles","search","setSearch","results","setResults","currentNode","setCurrentNode","refs","useKeyPress","handleDownKey","current","handleUpKey","allowFilter","e","ignoreKeyPressed","t","handleOnChnage","target","value","length","map","r","index","node","root","key","preventDefault","parent","tempNode","searchSetter","resultSetter","fetchResults","focus","targetKey","onPressDown","onPressUp","keyPressed","setKeyPressed","downHandler","upHandler","window","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import styled from 'styled-components'\nimport SearchIcon from '@material-ui/icons/Search';\nimport { useState, createRef, useEffect } from 'react'\nimport { IconButton, makeStyles } from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\n\nconst useStyles = makeStyles({\n  filterButton: {\n    backgroundColor: '#094074'\n  }\n})\n\nconst SearchButton = styled.div`\n    width: 44px;\n    height: 48px;\n    background-color: white;\n    margin-left: 4px;\n    border-radius: 4px;\n    box-shadow: 0 3px 5px 2px rgba(0, 0, 0, .1);\n    display: flex;\n    justify-content: center;\n    justify-items: center;\n    align-content: center;\n    align-items: center;\n    transition: 0.5s;\n    :hover {\n    box-shadow: 0 3px 5px 2px rgba(0, 0, 0, .2)\n    }\n    :active {\n    box-shadow: 0 3px 5px 2px rgba(0, 0, 0, 0);\n    }\n`\n\nconst SearchBarContainer = styled.div`\n  width: 100%;\n  height: 48px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`\n\nconst SearchInput = styled.input`\n  width: calc(100% - 48px);\n  background-color: #ffffff;\n  outline: none;\n  border: none;\n  height: 100%;\n  font-family: raleway, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  padding-left: 8px;\n  font-size: 16px;\n  font-weight: 100;\n  box-shadow: 0 3px 5px 2px rgba(0, 0, 0, .1);\n  border-radius: 4px;\n`\n\nconst RemoveText = styled.div`\n  width: 14px;\n  height: 14px;\n  border-radius: 7px;\n  right: 56px;\n  top: 17px;\n  line-height: 14px;\n  background-color: lightgray;\n  color: gray;\n  position: absolute;\n  text-align: center;\n  vertical-align: middle;\n  margin: auto;\n  cursor: pointer;\n  display: ${ props => props.haveText ? 'show' : 'none' };\n`\n\nconst SearchSection = styled.div`\n  position: absolute;\n  top: 51px;\n  right: 0;\n  left: 0;\n  width: 75%;\n  max-width: 450px;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  overflow: visible;\n  @media (max-width: 600px) {\n        width: 95%;\n    }\n`\n\nconst SearchResults = styled.ul`\n  margin-top: 4px;\n  background-color: white;\n  border-radius: 4px;\n  height: auto;\n  overflow: scroll;\n  width: 100%;\n  height: ${props => props.height !== undefined ? props.height + 'px' : 0 };\n  max-height: 360px;\n  z-index: 10;\n  box-shadow: 0 3px 5px 2px rgba(0, 0, 0, ${props => props.hide ? 0 : 0.1});\n  list-style-type: none;\n  padding-inline-start: 0;\n  margin-bottom: -1px;\n  transition: 0.3s ease-out;\n`\n\nconst SearchResult = styled.li`\n  position: relative;\n  padding: 16px;\n  cursor: pointer;\n  transition: 0.5s;\n  background-color: ${props => props.focused ? '#ECF5FE' : 'white'};\n  :nth-child(n+1):nth-last-child(-n+1),\n  :nth-child(n+1):nth-last-child(-n+1) ~ li {\n    border:none;\n  }\n  :hover {\n    background-color: #ECF5FE;\n  }\n  :before {\n    font-size: 12px;\n    content: '${props => props.category}';\n    margin-right: 8px;\n    background-color: #A9A9A9;\n    color: white;\n    padding: 4px;\n    border-radius: 4px;\n  }\n  :after {\n    opacity: ${props => props.focused ? '1' : '0'};\n    color: white;\n    transition: 0.5s;\n    background: lightgrey;\n    direction: ltr;\n    display: inline-block;\n    font-family: 'Material Icons', Verdana, Geneva, Tahoma, sans-serif;\n    font-size: 12px;\n    border-radius: 4px;\n    padding: 2px;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    line-height: 1;\n    text-transform: none;\n    white-space: nowrap;\n    word-wrap: normal;\n    -webkit-font-feature-settings: 'liga';\n    -webkit-font-smoothing: antialiased;\n    content: \"keyboard_return\";\n    position: absolute;\n    right: 8px;\n    top: 0;\n    bottom: 0;\n    margin: auto 0;\n    height: 12px;\n  }\n`\n\nconst scrollToRef = (searchResults, singleResult, fisrtSingleResult) => {\n  let searchResultCoordinates = searchResults.getBoundingClientRect();\n  let singleResultCoordinates = singleResult.getBoundingClientRect();\n  let fisrtSingleResultCoordinates = fisrtSingleResult.getBoundingClientRect();\n\n  let yStartSearchResultCoordinates = searchResultCoordinates.top;\n  let yEndSearchResultCoordinates = yStartSearchResultCoordinates + searchResults.offsetHeight;\n  \n  let outsideTopLimit = singleResultCoordinates.top < yStartSearchResultCoordinates;\n  let outsideBottomLimit = (singleResultCoordinates.y + singleResult.offsetHeight) > yEndSearchResultCoordinates;\n\n  // Get if element is inside view\n  if( outsideTopLimit || outsideBottomLimit ) {\n    let currentY = yStartSearchResultCoordinates - fisrtSingleResultCoordinates.top;\n    let visibleForEndPointDelta = singleResultCoordinates.top - yEndSearchResultCoordinates;\n    let visibleForStartPointDelta = yStartSearchResultCoordinates - singleResultCoordinates.top;\n\n    if (visibleForEndPointDelta < 0) {\n      let moveToDesiredPoint = currentY - visibleForStartPointDelta;\n      searchResults.scrollTo(0, moveToDesiredPoint);\n    } else {\n      let moveToDesiredPoint = currentY + visibleForEndPointDelta + singleResult.offsetHeight;\n      searchResults.scrollTo(0, moveToDesiredPoint)\n    }\n  }\n}\n\nconst searchField = createRef();\nconst searchResultsRef = createRef();\nexport default function SearchBar(props) {\n    const customStyles = useStyles();\n    const [search, setSearch] = useState(\"\");\n    const [results, setResults] = useState([]);\n    const [currentNode, setCurrentNode] = useState(0);\n    let refs = [];\n     \n    useKeyPress('ArrowDown', () => handleDownKey(currentNode, setCurrentNode, results, refs, searchResultsRef.current));\n    useKeyPress('ArrowUp', () => handleUpKey(currentNode, setCurrentNode, results, refs, searchResultsRef.current));\n\n    return (\n      <SearchSection {...props}>\n        <SearchBarContainer>\n          {filterButton(customStyles)}\n          {props.allowFilter ? () => filterButton() : <></>}\n          <SearchInput \n            onKeyDown={(e) => {ignoreKeyPressed(e, 'ArrowUp'); ignoreKeyPressed(e, 'ArrowDown');}}\n            onKeyUp={(e) => {ignoreKeyPressed(e, 'ArrowUp'); ignoreKeyPressed(e, 'ArrowDown');}}\n            ref={searchField}\n            value={search}\n            onChange={(t) => handleOnChnage(t.target.value, setSearch, setResults)}\n            placeholder=\"Search for anything\"/>\n          <SearchButton>\n              <SearchIcon />\n          </SearchButton>\n          <RemoveText align=\"center\"  haveText={search.length > 0} onClick={() => handleOnChnage('', setSearch, setResults)}>×</RemoveText>\n        </SearchBarContainer>\n        <SearchResults ref={searchResultsRef} hide={results.length == 0} height={results.length * 52} >\n          {results.map((r, index) => {\n              return <SearchResult ref={node => refs = [...refs, node]} focused={index === currentNode} category={'category'}>{r}</SearchResult>\n            }\n          )}\n        </SearchResults>\n      </SearchSection>\n    )\n}\n\nfunction filterButton(customStyles) {\n  return <IconButton classes={{root: customStyles.filterButton}} variant=\"contained\" color=\"primary\">\n    <FilterListIcon/>\n  </IconButton>\n}\n\nfunction ignoreKeyPressed(e, key) {\n  if (e.key === key) {\n    e.preventDefault();\n  }\n}\n\nfunction handleUpKey(currentNode, setCurrentNode, results, refs, parent) {\n  let tempNode = currentNode - 1\n  if(tempNode > -1) {\n    setCurrentNode(tempNode)\n    scrollToRef(parent, refs[tempNode], refs[0])\n  } \n}\n\nfunction handleDownKey(currentNode, setCurrentNode, results, refs, parent) {\n  let tempNode = currentNode + 1\n  if(tempNode < results.length) {\n    setCurrentNode(tempNode)\n    scrollToRef(parent, refs[tempNode], refs[0])\n  }\n}\n\nfunction handleOnChnage(value, searchSetter, resultSetter) {\n  searchSetter(value)\n  if(value.length == 0) {\n    resultSetter([])\n  } else {\n    resultSetter(fetchResults(value))\n  }\n  if (searchField.current != null) {\n    searchField.current.focus();\n  }\n}\n\nfunction fetchResults(value) {\n  return [\"Test result 1\", \"Test result 2\", \"Test result 3\", \"Test result 4\", \"Test result 5\", \"Test result 6\", \"Test result 7\", \"Test result 8\"]\n}\n\nexport function useKeyPress(targetKey, onPressDown = () => {}, onPressUp = () => {}) {\n\t// State for keeping track of whether key is pressed\n\tconst [keyPressed, setKeyPressed] = useState(false);\n\n\tuseEffect(() => {\n\t\t// If pressed key is our target key then set to true\n\t\tfunction downHandler({ key }) {\n\t\t\tif (key === targetKey) {\n\t\t\t\tsetKeyPressed(true);\n\t\t\t\tonPressDown();\n\t\t\t}\n\t\t}\n\n\t\t// If released key is our target key then set to false\n\t\tconst upHandler = ({ key }) => {\n\t\t\tif (key === targetKey) {\n\t\t\t\tsetKeyPressed(false);\n\t\t\t\tonPressUp();\n\t\t\t}\n\t\t};\n\n\t\t// Add event listeners\n\t\twindow.addEventListener('keydown', downHandler);\n\t\twindow.addEventListener('keyup', upHandler);\n\n\t\t// Remove event listeners on cleanup\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', downHandler);\n\t\t\twindow.removeEventListener('keyup', upHandler);\n\t\t};\n\t});\n\n\treturn keyPressed;\n}"]},"metadata":{},"sourceType":"module"}